<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Bootstrap Cards Gallery with Dynamic Lightbox</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
<style>
  .card {
    border-radius: 0.75rem;
  }
  .card-title, .card-text {
    text-align: center;
  }
  .gallery-img {
    cursor: pointer;
    border-radius: 0.75rem 0.75rem 0 0;
  }
  .lightbox {
    display: none;
    position: fixed;
    z-index: 1050;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.8);
    align-items: center;
    justify-content: center;
  }
  .lightbox.active {
    display: flex;
  }
  .lightbox img {
    max-width: 90%;
    max-height: 80vh;
    border-radius: 0.75rem;
  }
  .lightbox .nav-arrow, .lightbox .close-btn {
    position: fixed;
    color: white;
    cursor: pointer;
    user-select: none;
    z-index: 1100;
    font-size: 2.5rem;
  }
  .lightbox .close-btn {
    top: 1rem;
    right: 1rem;
  }
  .lightbox .nav-arrow {
    top: 50%;
    transform: translateY(-50%);
    padding: 0 1rem;
  }
  .lightbox .prev-arrow {
    left: 1rem;
  }
  .lightbox .next-arrow {
    right: 1rem;
  }
</style>
</head>
<body>
<div class="container my-4">
  <h2 class="mb-4 text-center">Cards Gallery</h2>
  <div class="row g-3">
    <!-- 6 cards -->
    <div class="col-6 col-md-4 col-lg-2">
      <div class="card">
        <img src="https://storage.googleapis.com/acciojob-open-file-collections/image1.jpg" alt="Image 1" class="img-fluid gallery-img" data-index="0" />
        <div class="card-body">
          <h6 class="card-title">Description 1</h6>
          <p class="card-text">Details about image 1.</p>
        </div>
      </div>
    </div>
    <div class="col-6 col-md-4 col-lg-2">
      <div class="card">
        <img src="https://storage.googleapis.com/acciojob-open-file-collections/image2.jpg" alt="Image 2" class="img-fluid gallery-img" data-index="1" />
        <div class="card-body">
          <h6 class="card-title">Description 2</h6>
          <p class="card-text">Details about image 2.</p>
        </div>
      </div>
    </div>
    <div class="col-6 col-md-4 col-lg-2">
      <div class="card">
        <img src="https://storage.googleapis.com/acciojob-open-file-collections/image3.jpg" alt="Image 3" class="img-fluid gallery-img" data-index="2" />
        <div class="card-body">
          <h6 class="card-title">Description 3</h6>
          <p class="card-text">Details about image 3.</p>
        </div>
      </div>
    </div>
    <div class="col-6 col-md-4 col-lg-2">
      <div class="card">
        <img src="https://storage.googleapis.com/acciojob-open-file-collections/image4.jpg" alt="Image 4" class="img-fluid gallery-img" data-index="3" />
        <div class="card-body">
          <h6 class="card-title">Description 4</h6>
          <p class="card-text">Details about image 4.</p>
        </div>
      </div>
    </div>
    <div class="col-6 col-md-4 col-lg-2">
      <div class="card">
        <img src="https://storage.googleapis.com/acciojob-open-file-collections/image5.jpg" alt="Image 5" class="img-fluid gallery-img" data-index="4" />
        <div class="card-body">
          <h6 class="card-title">Description 5</h6>
          <p class="card-text">Details about image 5.</p>
        </div>
      </div>
    </div>
    <div class="col-6 col-md-4 col-lg-2">
      <div class="card">
        <img src="https://storage.googleapis.com/acciojob-open-file-collections/image6.jpg" alt="Image 6" class="img-fluid gallery-img" data-index="5" />
        <div class="card-body">
          <h6 class="card-title">Description 6</h6>
          <p class="card-text">Details about image 6.</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Single lightbox container -->
<div class="lightbox" id="lightbox" tabindex="0" aria-modal="true" role="dialog" aria-label="Image gallery lightbox">
  <span class="close-btn" title="Close">&times;</span>
  <span class="nav-arrow prev-arrow" title="Previous">&#10094;</span>
  <!-- img inserted dynamically -->
  <span class="nav-arrow next-arrow" title="Next">&#10095;</span>
</div>

<script>
  const images = [
    'https://storage.googleapis.com/acciojob-open-file-collections/image1.jpg',
    'https://storage.googleapis.com/acciojob-open-file-collections/image2.jpg',
    'https://storage.googleapis.com/acciojob-open-file-collections/image3.jpg',
    'https://storage.googleapis.com/acciojob-open-file-collections/image4.jpg',
    'https://storage.googleapis.com/acciojob-open-file-collections/image5.jpg',
    'https://storage.googleapis.com/acciojob-open-file-collections/image6.jpg'
  ];

  let currentIndex = -1;
  const lightbox = document.getElementById('lightbox');
  const closeBtn = lightbox.querySelector('.close-btn');
  const prevBtn = lightbox.querySelector('.prev-arrow');
  const nextBtn = lightbox.querySelector('.next-arrow');

  function setLightboxImage(index) {
    currentIndex = index;
    // Remove old image if any
    const oldImg = lightbox.querySelector('img');
    if (oldImg) oldImg.remove();
    // Create new image
    const img = document.createElement('img');
    img.src = images[currentIndex];
    img.alt = `Image ${currentIndex + 1}`;
    lightbox.insertBefore(img, nextBtn);
  }

  function openLightbox(index) {
    setLightboxImage(index);
    lightbox.classList.add('active');
    lightbox.focus();
  }

  function closeLightbox() {
    lightbox.classList.remove('active');
    const img = lightbox.querySelector('img');
    if (img) img.remove(); // remove from DOM to keep img count as 6
  }

  function showPrev() {
    currentIndex = (currentIndex - 1 + images.length) % images.length;
    setLightboxImage(currentIndex);
  }

  function showNext() {
    currentIndex = (currentIndex + 1) % images.length;
    setLightboxImage(currentIndex);
  }

  document.querySelectorAll('.gallery-img').forEach((img, idx) => {
    img.addEventListener('click', () => openLightbox(idx));
  });

  closeBtn.addEventListener('click', closeLightbox);
  prevBtn.addEventListener('click', e => { e.stopPropagation(); showPrev(); });
  nextBtn.addEventListener('click', e => { e.stopPropagation(); showNext(); });

  lightbox.addEventListener('click', e => {
    if (e.target === lightbox) closeLightbox();
  });

  document.addEventListener('keydown', e => {
    if (!lightbox.classList.contains('active')) return;
    if (e.key === 'Escape') closeLightbox();
    else if (e.key === 'ArrowLeft') showPrev();
    else if (e.key === 'ArrowRight') showNext();
  });
</script>
</body>
</html>
